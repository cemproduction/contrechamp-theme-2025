{# CHAQUE ÉVÉNEMENT DANS LA PROGRAMMATION #}

{% set date = date|render|striptags|trim|date('U') %}
{% set mois = date|format_date('custom', 'F')|upper %}
{% set mention = titre_texte_2 %}
{% set dateNo = date|format_date('custom', 'j') %}
{% set day = date|format_date('custom', 'l')|upper %}
{% set hour = date|date("H:i")|replace({':':'H'}) %}
{% set sousevenements = texte_3|render|striptags|trim is not empty %}


{% if sousevenements %}
  {% set date_col_classes = [
    'col-12',
    'col-lg-4',
    'text-lg-start',
    'text-center',
    'order-lg-2'
  ]%}
{% else %}
  {% set date_col_classes = [
    'col-12',
    'col-lg-4',
    'd-flex',
    'flex-column',
    'justify-content-between',
    'text-lg-start',
    'text-center'
  ]%}
{% endif %}


<div {{ attributes.addClass( date_col_classes) }}> 
  <div>
    <h2 class="concert-date text-center">{{day}} {{dateNo}}&nbsp;{{mois}}</h2> 
    <div class="text-center">
      <a class="btn btn-primary my-3 stretched-link align-items-center" href="{{eventurl|raw|render|striptags|trim}}"><span class="align-middle">INFORMATIONS</span></a> 
    </div>
    <h3 class="concert-venue text-center">{{place|render|striptags|replace({'&amp;': '&','&#039;':"'"})|upper}}</h3> 
    <h4 class="concert-time mt-1 text-center">{{hour|replace({':':'H'})}}</h4>
  </div>

</div>

{% if (sousevenements) %}
  {% set nodeidVar = nodeid|render|striptags %}
  {{ drupal_view('sous_evenements', 'block_2', nodeidVar) }}
{% else %}
  <div class="col-12 col-lg-8"> 
    {% include ('@contrechamp/includes/evenement_prog.html.twig') %}
  </div>
{% endif %}
